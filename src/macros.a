PARAM    =     $00

!macro   PARAMS_ON_STACK .bytes {
         pla
         sta   PARAM
         plx
         stx   PARAM+1
         lda   #.bytes
         clc
         adc   PARAM
         bcc   +
         inx
+        phx
         pha
}

!macro   LDADDR .ptr {
         lda   #<.ptr
         ldy   #>.ptr
}

!macro   LDAY .ptr {
         lda   .ptr
         ldy   .ptr+1
}

!macro   STAY .ptr {
         sta   .ptr
         sty   .ptr+1
}
