kNumberOfGames = 25

gCurrentGame
         !byte 22
kGameDirectory                       ; length-prefixed pathname of where game subdirectories are stored
         !byte 2
         !raw "Z/"
kInfoFilename                        ; length-prefixed partial pathname of game info file, starting with '/' because reasons
         !byte 5
         !raw  "/INFO"

subdirectories                       ; length of this array must = kNumberOfGames, there is no range checking
         !word .ballyhoo
         !word .cutthroats
         !word .deadline
         !word .enchanter
         !word .hgttg
         !word .hollywoodhijinx
         !word .infidel
         !word .leathergoddesses
         !word .lurkinghorror
         !word .minizork
         !word .moonmist
         !word .planetfall
         !word .plunderedhearts
         !word .seastalker
         !word .sorcerer
         !word .spellbreaker
         !word .starcross
         !word .stationfall
         !word .suspect
         !word .suspended
         !word .wishbringer
         !word .witness
         !word .zorki
         !word .zorkii
         !word .zorkiii

; length-prefixed names of each subdirectory in game directory, 1 per game
.ballyhoo
         !byte 8
         !raw  "BALLYHOO"
.cutthroats
         !byte 10
         !raw  "CUTTHROATS"
.deadline
         !byte 8
         !raw  "DEADLINE"
.enchanter
         !byte 9
         !raw  "ENCHANTER"
.hgttg
         !byte 5
         !raw  "HGTTG"
.hollywoodhijinx
         !byte 9
         !raw  "HOLLYWOOD"
.infidel
         !byte 7
         !raw  "INFIDEL"
.leathergoddesses
         !byte 4
         !raw  "LGOP"
.lurkinghorror
         !byte 14
         !raw  "LURKING.HORROR"
.minizork
         !byte 9
         !raw  "MINI.ZORK"
.moonmist
         !byte 8
         !raw  "MOONMIST"
.planetfall
         !byte 10
         !raw  "PLANETFALL"
.plunderedhearts
         !byte 9
         !raw  "PLUNDERED"
.seastalker
         !byte 10
         !raw  "SEASTALKER"
.sorcerer
         !byte 8
         !raw  "SORCERER"
.spellbreaker
         !byte 12
         !raw  "SPELLBREAKER"
.starcross
         !byte 9
         !raw  "STARCROSS"
.stationfall
         !byte 11
         !raw  "STATIONFALL"
.suspect
         !byte 7
         !raw  "SUSPECT"
.suspended
         !byte 9
         !raw  "SUSPENDED"
.wishbringer
         !byte 11
         !raw  "WISHBRINGER"
.witness
         !byte 7
         !raw  "WITNESS"
.zorki
         !byte 6
         !raw  "ZORK.I"
.zorkii
         !byte 7
         !raw  "ZORK.II"
.zorkiii
         !byte 8
         !raw  "ZORK.III"

LoadGameInfo
         stz   .path
         lda   #<kGameDirectory
         ldy   #>kGameDirectory
         jsr   addToPath
         lda   gCurrentGame
         asl
         tax
         lda   subdirectories,x
         ldy   subdirectories+1,x
         jsr   addToPath
         lda   #<kInfoFilename
         ldy   #>kInfoFilename
         jsr   addToPath

         jsr   LoadFile
         !word .path
         !word $0800
         !word $1400
         !word $1C00
         rts


addToPath
         sta   $00
         sty   $01
         ldx   .path                 ; current pathname length
         ldy   #$00
         lda   ($00),y               ; length of this segment
         inc
         sta   .a+1
         ldy   #$01
-        lda   ($00),y
         sta   .pathbuffer,x
         inx
         iny
.a       cpy   #$FD                  ; set at runtime
         bcc   -
         stx   .path
         rts
.path
         !byte $FD                   ; set at runtime
.pathbuffer
         !fill 64                    ; enough zeroes for any ProDOS pathname
